module.exports=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r,i=n(1),o=n(29),a=n(32),s=n(11),u=n(13),c=n(33),l=n(34).CompositeDisposable,d=n(35),p=n(36),h=n(19);!function(t){function e(t){n(37).install("aml-workbench",!0).then(function(){y.add(atom.commands.add("atom-workspace",{"aml-workbench:editor-tools":i.initEditorTools,"aml-workbench:go-to-definition":s.gotoDeclaration,"aml-workbench:find-usages":s.findUsages,"aml-workbench:rename":s.renameRAMLElement,"aml-workbench:new-project":s.newProject})),y.add(atom.workspace.observeTextEditors(n(18).handle)),c.doPatch(),d.initialize(),p.initialize(),o.registerCommands(),i.initEditorTools(),h.initializeActionBasedMenu('atom-text-editor[data-grammar="source raml"],.raml-outline')})}function r(){return a}function f(){return u}function g(t){y.add(u.initEditorObservers(t))}function m(){y.dispose()}var y=new l;t.activate=e,t.getProvider=r,t.provideLinter=f,t.consumeLinter=g,t.deactivate=m,t.config={grammars:{type:"array",default:["source.raml","source.syaml","source.sjson"]},openConsoleInSplitPane:{type:"boolean",default:!0}}}(r||(r={})),t.exports=r},function(t,e,n){"use strict";function r(t){void 0===t&&(t=!0),null==g?g=new f(t):t&&g.display()}function i(){return null!=g&&g.opened}function o(){return g||(g=new f(!0)),g}function a(t,e){void 0===e&&(e=m.RIGHT);var n=null;switch(e){case m.BOTTOM:n=u.workspace.getActivePane().splitDown({});break;case m.TOP:n=u.workspace.getActivePane().splitUp({});break;case m.LEFT:n=u.workspace.getActivePane().splitLeft({});break;case m.RIGHT:n=u.workspace.getActivePane().splitRight({})}return n.addItem(t),n}Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),u=n(3),c=n(4),l=n(27),d=n(17),p=n(28),h=n(18),f=function(){function t(t){void 0===t&&(t=!0);var e=this;this._initialized=!1,this.opened=!1,this.updateCount=0,this.outlineCount=0,this._cleanOutline=!1,this.performanceDebug=!0,this.fire=!0,this.placeholder=!1,g=window.manager=this,u.workspace.onDidChangeActivePaneItem(function(n){return e.updateEverything(t)}),u.workspace.observeTextEditors(function(t){t.onDidDestroy(function(){var e=t.getPath();d.getNodeClientConnection().documentClosed(e)}),t.onDidChangeCursorPosition(function(n){return e.cursorChanged(t,n.newBufferPosition)})}),this.updateEverything(t),this.addAutoCloseListener(),this.addListenersForStructure()}return t.prototype.getPath=function(){return console.log("ETM::GetPath"),this.currentEditor?this.currentEditor.getPath():null},t.prototype.getCurrentEditor=function(){return this.currentEditor},t.prototype.getCurrentPosition=function(){return this.currentPosition},t.prototype.cursorChanged=function(t,e){p.clearOccurences(t);var n=t.getBuffer(),r=n.characterIndexForPosition(t.getCursorBufferPosition());d.getNodeClientConnection().positionChanged(g.unitPath,r),this.currentPosition=r},t.prototype.internalScheduleUpdateViews=function(t){var e=this;this.updateCount=t,setTimeout(function(){e.updateCount==t&&e.updateViews()},500)},t.prototype.scheduleViewsUpdate=function(){this.fire&&this.internalScheduleUpdateViews(this.updateCount+1)},t.prototype.internalScheduleOutlineUpdate=function(t){var e=this;this.outlineCount=t,setTimeout(function(){e.outlineCount==t&&e.updateOutline()},500)},t.prototype.scheduleOutlineUpdate=function(){this.internalScheduleOutlineUpdate(this.outlineCount+1)},t.prototype.addAutoCloseListener=function(){var t=this;u.workspace.onDidDestroyPane(function(e){try{var n=u.workspace.getPaneItems().filter(function(t){return void 0!=t.softTabs}).length;0==n&&(t.currentEditor=null,global.cleanCache&&global.cleanCache(),u.workspace.paneForItem(t._view)&&u.workspace.paneForItem(t._view).destroy(),u.workspace.paneForItem(t._details)&&u.workspace.paneForItem(t._details).destroy(),t.opened=!1)}catch(t){console.log(t)}})},t.prototype.getOrCreateView=function(){return this._view||(this._view=new l.RamlOutline,this.unitPath&&this._view.setUnit(this.unitPath)),this._view},t.prototype.getDetails=function(){return t.DETAILS_SUPPORT?(this._details||(this._details=new c.RamlDetails),this._details):null},t.prototype.updateDetails=function(){this.getDetails().update()},t.prototype.reparseAST=function(){if(this.currentEditor){var t=this.currentEditor.getPath();this.currentEditor.getBuffer();this.unitPath=t}},t.prototype.isETPane=function(e){if(this._view){var n=e.getItems();return t.DETAILS_SUPPORT&&n.indexOf(this.getDetails())>=0||n.indexOf(this._view)>=0}},t.prototype.display=function(){console.log("ETM::Display");var e=u.workspace,n=u.workspace.paneForItem(this.getCurrentEditor());n&&(e.paneForItem(this.getOrCreateView())||a(this.getOrCreateView()),t.DETAILS_SUPPORT&&(e.paneForItem(g.getDetails())||a(this.getDetails(),m.BOTTOM)),this.opened=!0)},t.prototype.setViewsDisplayStyle=function(t){this._details&&this._details.element&&(this._details.element.style.display=t?null:"none"),this._view&&this._view.element&&(this._view.element.style.display=t?null:"none")},t.prototype.isRaml=function(t){if(!t)return!1;var e=t.getPath();if(!e)return!1;var n=s.extname(e);return".raml"===n||".yaml"===n},t.prototype.updateEverything=function(t){void 0===t&&(t=!0);var e=u.workspace.getActiveTextEditor();if(e&&this.setViewsDisplayStyle(this.isAppropriateGrammar(e)),e&&e!=this.currentEditor&&this.isAppropriateGrammar(e)){this.currentEditor=e,0==this.opened&&t&&this.display(),e.patched||this.addListenersToEditor(e),this.reparseAST();var n=e.getBuffer().characterIndexForPosition(e.getCursorBufferPosition());this.positionUpdated(n),this.scheduleViewsUpdate()}},t.prototype.addListenersToEditor=function(t){var e=this,n=t.getBuffer();n.onDidChange(function(r){try{var i=n.characterIndexForPosition(t.getCursorBufferPosition());e.positionUpdated(i)}catch(t){console.log(t)}}),this.addListenersOnMove(t),this.currentEditor.patched=!0},t.prototype.addListenersForStructure=function(){var t=this;d.getNodeClientConnection().onStructureReport(function(e){var n=[];for(var r in e.structure)n.push(r);var i=n.join();d.getNodeClientConnection().debug("Got new structure report with categories "+i,"EditorManager","addListenersForStructure");var o=u.workspace.getActiveTextEditor();o&&t.isAppropriateGrammar(o)&&t.updateOutline()})},t.prototype.addListenersOnMove=function(e){var n=this,r=!1;u.workspace.onDidAddPaneItem(function(i){return r||0==n.isETPane(i.pane)||i.item&&!i.item.getText&&i.item==n.getOrCreateView()||t.DETAILS_SUPPORT&&i.item==n.getDetails()?i:void setTimeout(function(){try{var t=u.workspace.paneForItem(e);t&&(r=!0,i.pane.moveItemToPane(i.item,t,null),r=!1,t.setActiveItem(i.item),t.activate())}catch(t){console.log(t)}},18)})},t.prototype.setText=function(t){console.log("ETM::SetText");var e=this.currentEditor;null!=e&&e.setText(t)},t.prototype.isFromEdgeRow=function(){var t=this.getCurrentEditor();if(!t)return!1;var e=t.getCursorBufferPosition();if(!e)return!1;var n=e.row,r=t.previousRow;return t.previousRow=n,void 0!==r&&(r!==n&&(r===t.getBuffer().getLastRow()||0===r||void 0))},t.prototype.updateViews=function(){var e=(new Date).getMilliseconds();t.DETAILS_SUPPORT&&this._details&&this.getDetails().show(g.unitPath,g.currentPosition,this.isFromEdgeRow()),this._view&&this.getOrCreateView().setUnit(g.unitPath);var n=(new Date).getMilliseconds();this.performanceDebug&&console.log("Views update:"+(n-e))},t.prototype.updateOutline=function(){d.getNodeClientConnection().debug("Updating outline","EditorManager","updateOutline"),this._view&&this.getOrCreateView().setUnit(g.unitPath)},t.prototype.positionUpdated=function(t){this.currentPosition=t,this._details&&d.getNodeClientConnection().positionChanged(g.unitPath,this.currentPosition)},t.prototype.isAppropriateGrammar=function(t){return!!(this.isRaml(t)||h.isSwaggerJson(t)||h.isSwaggerYaml(t))},t.DETAILS_SUPPORT=!1,t}(),g=null;e.initEditorTools=r,e.editorToolsStatus=i,e.aquireManager=o;var m;!function(t){t[t.RIGHT=0]="RIGHT",t[t.LEFT=1]="LEFT",t[t.TOP=2]="TOP",t[t.BOTTOM=3]="BOTTOM"}(m=e.SplitDirections||(e.SplitDirections={})),e.doSplit=a},function(t,e){t.exports=require("path")},function(t,e){"use strict";function n(t){atom.open(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.onDidChangeActivePaneItem=function(t){return atom.workspace.onDidChangeActivePaneItem(t)},t.prototype.onDidOpen=function(t){return atom.workspace.onDidOpen(t)},t.prototype.addModalPanel=function(t){return atom.workspace.addModalPanel(t)},t.prototype.getActiveTextEditor=function(){return atom.workspace.getActiveTextEditor()},t.prototype.getActivePane=function(){return atom.workspace.getActivePane()},t.prototype.getActiveEditor=function(){return atom.workspace.getActiveEditor()},t.prototype.addRightPanel=function(t){return atom.workspace.addRightPanel(t)},t.prototype.paneForItem=function(t){return atom.workspace.paneForItem(t)},t.prototype.getPaneItems=function(){return atom.workspace.getPaneItems()},t.prototype.onDidAddPaneItem=function(t){return atom.workspace.onDidAddPaneItem(t)},t.prototype.onDidDestroyPane=function(t){return atom.workspace.onDidDestroyPane(t)},t.prototype.open=function(t,e){atom.workspace.open(t,e)},t.prototype.observeTextEditors=function(t){atom.workspace.observeTextEditors(t)},t}();e.Workspace=r,e.open=n,e.workspace=new r;var i=function(){function t(){}return t.prototype.add=function(t,e,n){return atom.commands.add(t,e,n)},t}();e.CommandManager=i,e.commands=new i},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(6),a=i.CompositeDisposable,s=n(8),u=n(1),c=n(17),l=n(25),d=function(t){function e(e){void 0===e&&(e=!0);var n=t.call(this)||this;n.allowStructureChanges=e,n.disposables=new a,n.addClass("raml-details");var r=c.getNodeClientConnection();return r.onDetailsReport(function(t){return n.onDetailsReport(t)}),n.reconciler=new l.Reconciler(r,800),n}return r(e,t),e.prototype.getTitle=function(){return"Details"},e.prototype.attached=function(){try{this.element.innerHTML="<div></div>",this._children=[],this.container=i.vc(),this.addChild(this.container),this.ui().appendChild(this.container.ui()),t.prototype.attached.call(this)}catch(t){}},e.prototype.setResource=function(t,e){this.wasSchema&&(this.schemaView.dispose(),this.schemaView=null),this.wasSchema=!1,window.detailsnode=t,window.detailscontext=e,null==t&&this.displayEmpty(),s.updateDetailsPanel(t,e,this.container,!0)},e.prototype.update=function(){window.detailsnode&&this.setResource(window.detailsnode,window.detailscontext)},e.prototype.displayEmpty=function(){this.container.clear()},e.prototype.destroy=function(){u.aquireManager()._details=null,this.disposables.dispose(),this._unitPath=null,this._position=null,this.container.dispose(),this.container=null,window.detailsnode=null,window.detailscontext=null,this._children=[],s.oldItem&&s.oldItem.detach(),this.wasSchema&&(this.schemaView.dispose(),this.schemaView=null),s.oldItem=null},e.prototype.show=function(t,e,n){var r=this;if(void 0===n&&(n=!1),n||this._unitPath!=t||this._position!==e){this._unitPath=t,this._position=e;var i=this.reconciler;try{c.getNodeClientConnection().getDetails(t,e).then(function(n){r.setResource(n,{uri:t,position:e,localModel:!1,reconciler:i})})}catch(t){}}},e.prototype.onDetailsReport=function(t){var e=this;if(t.uri==this._unitPath){var n=this.reconciler;c.getNodeClientConnection().getLatestVersion(t.uri).then(function(r){null!=t.version&&t.version<r||e.setResource(t.details,{uri:t.uri,position:t.position,localModel:!1,reconciler:n})})}},e}(o.Scrollable);e.RamlDetails=d},function(t,e){t.exports=require("atom-ui-lib")},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=function(t){function e(){var e=t.call(this)||this;return e._children=[],e}return r(e,t),e.content=function(){var t=this.div({class:"scrollpad pane-item padded",tabindex:-1,style:"overflow:scroll;"});return t},e.prototype.dispose=function(){},e.prototype.caption=function(){return""},e.prototype.scroll=function(t,e){this.element.scrollTop=t,this.element.scrollLeft=e},e.prototype.size=function(){return{top:this.element.scrollTop,left:this.element.scrollLeft,bottom:this.element.scrollTop+this.element.clientHeight,right:this.element.scrollLeft+this.element.clientWidth}},e.prototype.changed=function(){},e.prototype.refresh=function(){},e.prototype.ui=function(){return this.element},e.prototype.setParent=function(t){null!=this._parent&&this._parent.removeChild(this),this._parent=t},e.prototype.addChild=function(t){t.setParent(this),this._children.push(t)},e.prototype.removeChild=function(t){this._children=this._children.filter(function(e){return e!=t})},e.prototype.doRender=function(){return this.innerRenderUI()},e.prototype.selfRender=function(){return document.createElement("div")},e.prototype.attached=function(){this.html(this.innerRenderUI())},e.prototype.innerRenderUI=function(){var t=this.selfRender();return this._children.forEach(function(e){var n=e.renderUI();n&&t.appendChild(n)}),t},e.prototype.renderUI=function(){return this.element},e.prototype.parent=function(){return null},e.prototype.children=function(){return this._children},e.prototype.isAttached=function(){return!0},e}(i.ScrollView);e.Scrollable=o},function(t,e){t.exports=require("atom-space-pen-views")},function(t,e,n){"use strict";function r(t,n,r,c){void 0===c&&(c=!1),r.clear();var l=atom.config,d=atom.styles.emitter.handlersByEventName,p=[].concat(d["did-add-style-element"]),h=[].concat(d["did-remove-style-element"]),f=[].concat(d["did-update-style-element"]),g=[].concat(l.emitter.handlersByEventName["did-change"]),m=atom.grammars.emitter||atom.grammars.textmateRegistry.emitter,y=[].concat(m["did-add-grammar"]),v=[].concat(m["did-update-grammar"]),C=[].concat(atom.grammars.nullGrammar.emitter.handlersByEventName["did-update"]);try{var w,x=!0,S=o.buildItem(t,n,!1);try{w=S.render({})}finally{e.oldItem&&e.oldItem.detach(),e.oldItem=S,w&&r.addChild(w),x=!1}if(u){var b=u.getActualField().ui();b.focus(),b.getModel().setCursorBufferPosition(s),u=null,s=null,a=null}if(x){var I=i.h3("Object has no additional properties.");i.applyStyling(i.TextClasses.WARNING,I),I.setStyle("text-align","center").margin(0,0,24,12),r.addChild(I)}}catch(t){throw t}finally{l.emitter.handlersByEventName["did-change"]=g,d["did-add-style-element"]=p,d["did-remove-style-element"]=h,d["did-update-style-element"]=f,m["did-add-grammar"]=y,m["did-update-grammar"]=v,atom.grammars.nullGrammar.emitter.handlersByEventName["did-update"]=C}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(9);e.nodes={Api:{properties:["title","version","baseUri","mediaType","protocols"],actions:[]},Resource:{properties:["relativeUri","displayName","description","is","type"]},Method:{properties:["method","displayName","description","is","type","protocols","securedBy"]},DataElement:{properties:["name","displayName","description","default","required"]},Response:{properties:["code","description"]}},e.filterOut={properties:["location","annotations","repeat","locationKind","signature"]};var a=null,s=-1,u=null;e.updateDetailsPanel=r},function(t,e,n){"use strict";function r(t){return null!=t.getUri}function i(t){return null!=t.addNode}function o(t){return null!=t.addAction}function a(t,e,n){var r=new I(t,e);try{if(t&&t.children)for(var i=0,o=t.children;i<o.length;i++){var a=o[i];if("CATEGORY"==a.type){var u=a.title;if(a.children)for(var c=0,l=a.children;c<l.length;c++){var d=l[c];s(d,r,u,e)}}else s(a,r,null,e)}}catch(t){console.log(t)}return r}function s(t,e,n,r){var i=null;try{if("CHECKBOX"==t.type)i=new _(t,r);else if("JSONSCHEMA"==t.type&&null!==t.valueText)i=new D(t,r);else if("XMLSCHEMA"==t.type&&null!==t.valueText)i=new M(t,r);else if("MARKDOWN"==t.type)i=new N(t,r);else if("SELECTBOX"==t.type&&null!==t.options)i=new U(t,r);else if("MULTIEDITOR"==t.type)i=new E(t,r);else if("TREE"==t.type)i=new V(t,r);else if("STRUCTURED"==t.type)i=new j(t,r);else if("TYPEDISPLAY"==t.type)i=new S(t,r);else if("TYPESELECT"==t.type)i=new F(t,r);else if("JSONEXAMPLE"==t.type&&null!==t.valueText)i=new A(t,r);else if("XMLEXAMPLE"==t.type&&null!==t.valueText)i=new B(t,r);else if("ATTRIBUTETEXT"==t.type)i=new P(t,r);else if("DETAILS_ACTION"==t.type)if("CUSTOM_ACTION"!=t.subType){var o=u(e,n,r);o.addNode(t)}else{var a=l(e,n,r);a.addAction(t)}}catch(t){console.log(t)}null!=i?e.addItemToCategory(n,i):console.log("Can not recognize element "+t.type)}function u(t,e,n){for(var r=t.subCategoryByNameOrCreate(e),o=0,a=r.children();o<a.length;o++){var s=a[o];if(i(s))return s}var u=new H(n);return r.children().unshift(u),u}function c(t,e,n){for(var r=t.subCategoryByNameOrCreate(e),o=0,a=r.children();o<a.length;o++){var s=a[o];if(i(s))return s}return null}function l(t,e,n){for(var r=t.subCategoryByNameOrCreate(e),i=0,a=r.children();i<a.length;i++){var s=a[i];if(o(s))return s}var u=new G(n),l=c(t,e,n);return l?r.children().splice(1,0,u):r.children().unshift(u),u}var d=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var p,h=n(10),f=n(5),g=n(11),m=n(17),y=n(11),v=n(19),C=!1,w=function(){function t(t,e,n){this.context=t,this.item=e,this.newValue=n,this.cancelled=!1}return t.prototype.run=function(){if(this.context.localModel)return this.context.localModel[this.item.id]=this.newValue,Promise.resolve([]);var t=m.getNodeClientConnection();return t.changeDetailValue(this.context.uri,this.context.position,this.item.id,this.newValue)},t.prototype.conflicts=function(t){return!!r(t)&&this.getUri()===t.getUri()},t.prototype.cancel=function(){this.cancelled=!0},t.prototype.isCanceled=function(){return this.cancelled},t.prototype.getUri=function(){return this.context.uri},t}(),x=function(){function t(t,e){void 0===e&&(e=""),this._title=t,this.description=e,this.listeners=[]}return t.prototype.needsSeparateLabel=function(){return!1},t.prototype.detach=function(){this.dispose(),this.children().forEach(function(t){t.detach&&t.detach()})},t.prototype.addListener=function(t){this.listeners.push(t)},t.prototype.removeListener=function(t){this.listeners=this.listeners.filter(function(e){return e!=t})},t.prototype.add=function(t){throw new Error("Not supported")},t.prototype.root=function(){return this.parent?this.parent.root():this},t.prototype.title=function(){return this._title},t.prototype.children=function(){return[]},t.prototype.setDescription=function(t){this.description=t},t.prototype.setTitle=function(t){this._title=t},t.prototype.render=function(t){throw void 0===t&&(t={}),new Error("Not Implemented")},t.prototype.item=function(t){return null},t.prototype.setError=function(t){},t.prototype.clearErrors=function(){},t}();e.Item=x;var S=function(t){function e(e,n){var r=t.call(this,"Type "+e.title,"")||this;return r.detailsNode=e,r.context=n,r}return d(e,t),e.prototype.render=function(t){var e=new f.WrapPanel;return e.setCaption(this.title()),e},e.prototype.dispose=function(){},e}(x);e.TypeDisplayItem=S;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._children=[],e}return d(e,t),e.prototype.add=function(t){t.parent=this,this._children.push(t)},e.prototype.children=function(){return this._children},e.prototype.plainChildren=function(){return this._children.filter(function(t){return!(t instanceof e)})},e.prototype.categories=function(){return this._children.filter(function(t){return t instanceof e})},e.prototype.item=function(t){var e;return this._children.forEach(function(n){n.title()==t&&(e=n);var r=n.item(t);r&&(e=r)}),e},e.prototype.render=function(t){var e=this;void 0===t&&(t={});var n=this.createSection(t);this._result=n,this.description&&t.showDescription&&(this.descriptionLabel=f.label(this.description),n.addChild(this.descriptionLabel)),this.contributeTop(n),this.plainChildren().forEach(function(t){return e.addChild(n,t)});var r=this.createWrappedChild(n);this.subCategories=r;var i=this.categories(),o={};i.forEach(function(t){return o[t.title()]=t});var a=[];o.General&&(a.push(o.General),delete o.General),o.Facets&&(a.push(o.Facets),delete o.Facets);for(var s in o)a.push(o[s]);return a.forEach(function(t){return e.addChild(r,t)}),n},e.prototype.detach=function(){t.prototype.detach.call(this),this._result.dispose()},e.prototype.createSection=function(t){if(t.showHeader)return new f.Section(f.h3(this.title()),!1);var e=new f.Panel;return e.setCaption(this.title()),e},e.prototype.createWrappedChild=function(t){return t},e.prototype.addChild=function(t,e){var n=e.render();if(t instanceof f.TabFolder){var r=t;r.add(n.caption(),f.Icon.NONE,n)}else{if(e.needsSeparateLabel()){var i=f.label(e.title());i.margin(0,5,0,0),t.addChild(i),t.addChild(f.label(e.description))}t.addChild(n)}},e.prototype.contributeTop=function(t){},e.prototype.dispose=function(){},e.prototype.setError=function(t){},e.prototype.clearErrors=function(){this._children.forEach(function(t){return t.clearErrors()})},e.prototype.update=function(t){},e}(x),I=function(t){function e(e,n){var r=t.call(this,e?e.title:"API",e?e.description:"")||this;return r.detailsNode=e,r.context=n,r.ep=null,r}return d(e,t),e.prototype.detach=function(){t.prototype.detach.call(this),this._result.dispose()},e.prototype.createWrappedChild=function(t){var e=new f.TabFolder;return e.setOnSelected(function(){C||(p=e.selectedComponent().caption())}),t.addChild(e),e},e.prototype.subCategoryByNameOrCreate=function(t){var e=h.find(this.children(),function(e){return e.title()==t});if(!e){var n=new b(t);return this.add(n),n}return e},e.prototype.addItemToCategory=function(t,e){return null==t?(this._children.push(e),void(e.parent=this)):void this.subCategoryByNameOrCreate(t).add(e)},e.prototype.contributeTop=function(t){this.errorLabel=f.label("",f.Icon.BUG,f.TextClasses.ERROR),this.ep=f.hc(this.errorLabel),this.ep.setDisplay(!1),t.addChild(this.ep)},e.prototype.render=function(e){void 0===e&&(e={}),C=!0;try{var n=t.prototype.render.call(this,e);this._options=e,this._panel=n;for(var r=this.subCategories,i=0;i<r.tabsCount();i++){var o=r.get(i);if(o.header==p)return r.setSelectedIndex(i),n}var a="";return this.detailsNode.description&&(a=this.detailsNode.description),a.length&&!e.showDescription&&(n.addChild(f.html("<hr/>")),n.addChild(f.label(a,f.Icon.INBOX,f.TextClasses.SUBTLE))),this.update(this),n}finally{C=!1}},e.prototype.dispose=function(){this.detailsNode=null},e.prototype.update=function(t){},e}(b),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.setLabelWidth=function(t){this.setStyle("margin-left",t+2+"ch")},e}(f.CheckBox),P=function(t){function e(e,n){var r=t.call(this,e?e.title:"",e?e.description:"")||this;return r.outlineNode=e,r.context=n,r.rendered=!1,r.update=function(t,e){r.rendered&&r.fromEditorToModel(t,e)},r}return d(e,t),e.prototype.dispose=function(){this.outlineNode=null,this.fld&&this.fld.getBinding().removeListener(this.update)},e.prototype.clearErrors=function(){this.setError(null)},e.prototype.setError=function(t){t?(this.errorLabel.setText(t),this.errorLabel.setDisplay(!0)):this.errorLabel&&this.errorLabel.setDisplay(!1)},e.prototype.fromEditorToModel=function(t,e){var n=new w(this.context,this.outlineNode,t),r=this.context;r.reconciler.schedule(n).then(function(t){r.localModel||(g.applyChangedDocuments(t),g.gotoPosition(r.position))})},e.prototype.toLocalValue=function(t){return t},e.prototype.toUIValue=function(t){return t},e.prototype.fromModelToEditor=function(){this.fld&&this.fld.getBinding().set(this.outlineNode.valueText)},e.prototype.render=function(){var t=new f.WrapPanel;this.errorLabel=f.label("",f.Icon.BUG,f.TextClasses.ERROR),this.errorLabel.setDisplay(!1),this.errorLabel.setStyle("margin-left",this._title.length+1+"ch");var e=this.createField();return this.fld=e,e&&e.getBinding().addListener(this.update),t.setCaption(this.title()),this.fromModelToEditor(),e&&t.addChild(e),t.addChild(this.errorLabel),this.rendered=!0,t},e.prototype.createField=function(){return f.texfField(this.needsSeparateLabel()?"":this.outlineNode.title,"",function(t){})},e}(x),E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.fromModelToEditor=function(){this.fld&&this.fld.getBinding().set(this.outlineNode.valueText)},e}(P),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.createField=function(){return new T(this.outlineNode.title,f.Icon.NONE,function(t){})},e.prototype.toUIValue=function(t){return!!t&&(t===!0||"true"===t.trim())},e.prototype.toLocalValue=function(t){return t+""},e}(P),O=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.margin(0,0,6,12),r.setMini(!1),r.setStyle("min-height","100px"),r.setStyle("border","solid"),r.setStyle("border-width","1px"),r.setStyle("border-radius","2px"),r.setStyle("font-size","1.15em"),r.setStyle("border-color","rgba(0,0,0,0.2)"),r.setGrammar("source.mdcustom"),r}return d(e,t),e.prototype.setLabelWidth=function(){},e.prototype.setLabelHeight=function(){},e.prototype.setRequired=function(t){},e}(f.AtomEditorElement),R=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.margin(0,0,6,12),r.setMini(!1),r.setStyle("min-height","100px"),r.setStyle("border","solid"),r.setStyle("border-width","1px"),r.setStyle("border-radius","2px"),r.setStyle("font-size","1.15em"),r.setStyle("border-color","rgba(0,0,0,0.2)"),r.setGrammar("text.xml"),r}return d(e,t),e.prototype.setLabelWidth=function(){},e.prototype.setLabelHeight=function(){},e.prototype.setRequired=function(t){},e}(f.AtomEditorElement),L=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.margin(0,0,6,12),r.setMini(!1),r.setStyle("min-height","100px"),r.setStyle("border","solid"),r.setStyle("border-width","1px"),r.setStyle("border-radius","2px"),r.setStyle("font-size","1.15em"),r.setStyle("border-color","rgba(0,0,0,0.2)"),r.setGrammar("source.json"),r}return d(e,t),e.prototype.setLabelWidth=function(){},e.prototype.setLabelHeight=function(){},e.prototype.setRequired=function(t){},e}(f.AtomEditorElement),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.createField=function(){var t=new O("",function(t){});return t},e.prototype.needsSeparateLabel=function(){return!0},e}(P),A=function(t){function e(e,n){return t.call(this,e,n)||this}return d(e,t),e.prototype.createField=function(){var t=new L(this.outlineNode.valueText,function(t){});return t},e.prototype.needsSeparateLabel=function(){return!0},e.prototype.fromModelToEditor=function(){},e.prototype.fromEditorToModel=function(t,e){},e}(P),B=function(t){function e(e,n){return t.call(this,e,n)||this}return d(e,t),e.prototype.createField=function(){var t=new R(this.outlineNode.valueText,function(t){});return t},e.prototype.needsSeparateLabel=function(){return!0},e.prototype.fromModelToEditor=function(){},e.prototype.fromEditorToModel=function(t,e){},e}(P),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.createField=function(){var t=new R("",function(t){});return t},e.prototype.needsSeparateLabel=function(){return!0},e}(P),D=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.createField=function(){var t=new L("",function(t){});return t},e.prototype.needsSeparateLabel=function(){return!0},e}(P),U=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.outlineNode=e,r}return d(e,t),e.prototype.createField=function(){var t=this.outlineNode.options?this.outlineNode.options:[],e=new f.SelectField(this.outlineNode.title,function(t){},"",f.Icon.NONE,t);return e.getActualField().setOptions(t),e},e}(P),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.fromEditorToModel=function(t,e){},e}(U),k=function(t){function e(e,n){var r=t.call(this)||this;r.context=n;var i={render:function(t){var e=f.label(t.title,f.Icon.CIRCUIT_BOARD,f.TextClasses.HIGHLIGHT),n=f.label(t.valueText?":"+t.valueText:"",f.Icon.NONE,f.TextClasses.SUCCESS),r=f.hc(e,n);return r}},o=function(t){return t.children?t.children:[]},a=f.treeViewer(o,i,function(t){return t.title}),s={children:[e]};return a.setInput(s),r.addChild(f.label(e.title)),r.addChild(a),r}return d(e,t),e.prototype.setLabelWidth=function(){},e.prototype.setLabelHeight=function(){},e.prototype.setRequired=function(t){},e}(f.Panel),j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.createField=function(){var t=this.outlineNode.children;if(!t||1!=t.length)return null;var e=new k(t[0],this.context);return e},e}(P),V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.createField=function(){var t=this.outlineNode.children;if(!t||1!=t.length)return null;var e=new k(t[0],this.context);return e},e}(P),H=function(t){function e(e){var n=t.call(this,"Actions","")||this;return n.context=e,n.nodes=[],n}return d(e,t),e.prototype.addNode=function(t){this.nodes.push(t)},e.prototype.render=function(t){var e=this,n=f.vc(),r=f.hc();return n.addChild(f.h3("Insertions and Delete: ")),n.addChild(r),this.nodes.forEach(function(t){"INSERT"==t.subType&&r.addChild(f.button(t.title,f.ButtonSizes.EXTRA_SMALL,f.ButtonHighlights.INFO,f.Icon.NONE,function(n){e.run(t.id)}).margin(3,3,3,3))}),this.nodes.forEach(function(t){"INSERT_VALUE"==t.subType&&r.addChild(f.button(t.title,f.ButtonSizes.EXTRA_SMALL,f.ButtonHighlights.WARNING,f.Icon.NONE,function(n){e.run(t.id)}).margin(3,3,3,3))}),this.nodes.forEach(function(t){"DELETE"==t.subType&&r.addChild(f.button(t.title,f.ButtonSizes.EXTRA_SMALL,f.ButtonHighlights.ERROR,f.Icon.NONE,function(n){e.run(t.id)}).margin(3,3,3,3))}),n},e.prototype.run=function(t){var e=m.getNodeClientConnection();e.executeDetailsAction(this.context.uri,t,this.context.position).then(function(t){y.applyChangedDocuments(t)})},e.prototype.dispose=function(){},e}(x),G=function(t){function e(e){var n=t.call(this,"Actions","")||this;return n.context=e,n.nodes=[],n}return d(e,t),e.prototype.addAction=function(t){this.nodes.push(t)},e.prototype.render=function(t){var e=this,n=f.vc(),r=f.hc();return n.addChild(f.h3("Custom Actions: ")),n.addChild(r),this.nodes.forEach(function(t){r.addChild(f.button(t.title,f.ButtonSizes.EXTRA_SMALL,f.ButtonHighlights.INFO,f.Icon.NONE,function(n){e.run(t.id)}).margin(3,3,3,3))}),n},e.prototype.run=function(t){v.launchServerActionByID(this.context.uri,t,this.context.position)},e.prototype.dispose=function(){},e}(x);e.buildItem=a},function(t,e){t.exports=require("underscore")},function(t,e,n){"use strict";function r(t,e,n,r,i){void 0===r&&(r=!0),void 0===i&&(i=!0);var o=[i?"#%RAML 1.0":"#%RAML 0.8","title: "+t];e&&o.push("version: "+e),n&&o.push("baseUri: "+n);var a=["types:","  TestType:","    type: object","    properties:","      id: number","      optional?: string","      expanded:","        type: object","        properties:","          count: number"],s=["/helloWorld:","  get:","    responses:","      200:","        body:","          application/json:","            example: |","              {",'                "message" : "Hello World"',"              }"],u=o;
return r&&(i&&(u=u.concat(a)),u=u.concat(s)),u.join("\n")+"\n"}function i(){(new E).show()}function o(t){var e=t.match(/^.*((\r\n|\n|\r)|$)/gm);return e}function a(t){for(var e=o(t),n=[],r=0;r<e.length;r++)e[r].trim().length>0&&n.push(e[r]);return n.join("")}function s(){var t=atom.workspace.getActiveTextEditor();return t?t:I.aquireManager()?I.aquireManager().getCurrentEditor():null}function u(t){var e=s();if(e){var n=e.getBuffer().positionForCharacterIndex(t);e.setSelectedBufferRange({start:n,end:n},{})}}function c(){var t=s();if(t){var e=t.getCursorBufferPosition(),n=t.getBuffer().characterIndexForPosition(e),r=t.getPath();T.getNodeClientConnection().openDeclaration(r,n).then(function(t){t&&0!=t.length&&atom.workspace.open(t[0].uri,{}).then(function(e){var n=s(),r=n.getBuffer().positionForCharacterIndex(t[0].range.start),i=n.getBuffer().positionForCharacterIndex(t[0].range.end);n.setSelectedBufferRange({start:r,end:i},{})})})}}function l(){var t=s();t&&b.relint(t)}function d(t){var e=s();return e.getPath()==t?e:null}function p(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=d(r.uri),o=null;o=i?i.getText():C.readFileSync(r.uri).toString();var a=null;if(r.text)a=r.text;else{if(!r.textEdits)continue;a=P.applyDocumentEdits(o,r.textEdits)}i?i.getBuffer().setText(a):C.writeFileSync(r.uri,a)}}function h(t,e){for(var n=["\r","\n","[","]",":",".",","," ","\t","{","}","'","'",'"'],r=0,i=e-1;i>=0;i--){for(var o=t.charAt(i),a=!1,s=0,u=n;s<u.length;s++){var c=u[s];if(o==c){r=i+1,a=!0;break}}if(a)break}for(var l=t.length,i=e;i<t.length;i++){for(var o=t.charAt(i),a=!1,d=0,p=n;d<p.length;d++){var c=p[d];if(o==c){l=i,a=!0;break}}if(a)break}return t.substring(r,l)}function f(){var t=s();if(t&&".raml"==w.extname(t.getPath())){var e=t.getCursorBufferPosition(),n=t.getBuffer().characterIndexForPosition(e);t.getPath(),h(t.getText(),n)}}function g(t){void 0===t&&(t=m);var e=s(),n=e.getCursorBufferPosition(),r=e.getBuffer().characterIndexForPosition(n),i=e.getPath();T.getNodeClientConnection().findReferences(i,r).then(function(e){e&&t(e)})}function m(t){_?_.setInput(t):(_=new O(t),_.panel=atom.workspace.addBottomPanel({item:_}))}function y(){g(m)}var v=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var C=n(12),w=n(2),x=n(5),S=n(7),b=n(13),I=n(1),T=n(17),P=T.textEditProcessor,E=function(){function t(t){void 0===t&&(t="Create RAML Project"),this.title=t,this.apititle="New API",this.version="v1",this.baseUri="http://api.samplehost.com",this._raml1=!0,this._defStructure=!0,this._createSampleResource=!0,this.sourceValue=w.resolve(this.generateDefaultProjectParentFolder(),"newRamlProject")}return t.prototype.generateDefaultProjectParentFolder=function(){return x.fdUtils.getHome()},t.prototype.extraContent=function(t){},t.prototype.validateProjectLocation=function(t){var e=t?t.trim():"";if(!e)return x.errorStatus("Path should't be empty");var n=w.dirname(e);return n&&"."!=n?C.existsSync(n)?x.okStatus():x.errorStatus("Parent directory does not exist"):x.errorStatus("Can not find path parent")},t.prototype.validateTitle=function(t){var e=t?t.trim():"";return!e||e.length<1?x.errorStatus("Title field is required"):x.okStatus()},t.prototype.show=function(){var t=this,e=null,n=x.section(this.title,x.Icon.BOOK,!1,!1,x.h3("Please select location to place your project:")).pad(10,10),r=new x.Panel(x.LayoutType.BLOCK),i=x.label("",null,x.TextClasses.ERROR),o=new x.CustomField("",i,function(t){return t});o.setDisplay(this.validateProjectLocation(this.sourceValue).code==x.StatusCode.ERROR),r.addChild(o);var a=x.texfField("",this.sourceValue,function(e){return t.sourceValue=e.getBinding().get()});a.getBinding().addValidator(function(){return t.validateProjectLocation(t.sourceValue)}),a.setStyle("width","400px"),a.getBinding().addListener(function(e){var n=t.validateProjectLocation(e);n.code!=x.StatusCode.ERROR?(i.setText(""),i.setIcon(x.Icon.NONE),o.setDisplay(!1)):(i.setText(n.message),i.setIcon(x.Icon.BUG),o.setDisplay(!0))}),r.addChild(a),r.addChild(x.h3("Title of your API:"));var s=x.label("",null,x.TextClasses.ERROR),u=new x.CustomField("",s,function(t){return t});u.setDisplay(!1),r.addChild(u);var c=x.texfField("",this.apititle,function(e){return t.apititle=e.getBinding().get()});c.getBinding().addValidator(function(){return t.validateTitle(t.apititle)}),c.getBinding().addListener(function(e){var n=t.validateTitle(e);n.code!==x.StatusCode.ERROR?(s.setText(""),s.setIcon(x.Icon.NONE),u.setDisplay(!1)):(s.setText(n.message),s.setIcon(x.Icon.BUG),u.setDisplay(!0))}),r.addChild(c),r.addChild(x.h3("Version of your API")),r.addChild(x.texfField("",this.version,function(e){return t.version=e.getBinding().get()})),r.addChild(x.h3("Base URI of your API")),r.addChild(x.texfField("",this.baseUri,function(e){return t.baseUri=e.getBinding().get()})),n.addChild(r);var l=x.checkBox("Use RAML 1.0");l.setValue(this._raml1),l.getBinding().addListener(function(e){return t._raml1=l.getValue()}),n.addChild(l);var d=x.checkBox("Create default directory structure");d.setValue(this._defStructure),d.getBinding().addListener(function(e){return t._defStructure=d.getValue()}),n.addChild(d);var p=x.checkBox("Create sample resource and method");p.setValue(this._createSampleResource),p.getBinding().addListener(function(e){return t._createSampleResource=p.getValue()}),n.addChild(p);var h=x.hc().setPercentWidth(100).setStyle("display","flex");h.addChild(x.label("",null,null,null).setStyle("flex","1")),h.addChild(x.button("Cancel",x.ButtonSizes.NORMAL,x.ButtonHighlights.NO_HIGHLIGHT,x.Icon.NONE,function(t){e.destroy()}).margin(10,10)),h.addChild(x.button("Create",x.ButtonSizes.NORMAL,x.ButtonHighlights.SUCCESS,x.Icon.NONE,function(n){t.validateTitle(t.apititle).code!==x.StatusCode.ERROR&&t.validateProjectLocation(t.sourceValue).code!==x.StatusCode.ERROR&&(t.onOk(e),e.destroy())})),n.addChild(h),e=atom.workspace.addModalPanel({item:n.renderUI()})},t.prototype.createIfNotExist=function(t){var e=w.resolve(this.sourceValue,t);C.existsSync(e)||C.mkdirSync(e)},t.prototype.onOk=function(t){C.existsSync(this.sourceValue)||C.mkdirSync(this.sourceValue),this._defStructure&&(this.createIfNotExist("schemas"),this.createIfNotExist("examples"),this.createIfNotExist("traits"),this.createIfNotExist("resourceTypes"),this.createIfNotExist("securitySchemes"),this.createIfNotExist("documentation"),this._raml1&&(this.createIfNotExist("notebooks"),this.createIfNotExist("scripts")));var e=r(this.apititle,this.version,this.baseUri,this._createSampleResource,this._raml1),n=w.resolve(this.sourceValue,"api.raml");C.writeFileSync(n,e),atom.open({pathsToOpen:[this.sourceValue,n]})},t}();e.createRAMLFile=r,e.newProject=i,e.splitOnLines=o,e.cleanEmptyLines=a,e.getActiveEditor=s,e.gotoPosition=u,e.gotoDeclaration=c,e.revalidate=l,e.getEditorByUriOrPath=d,e.applyChangedDocuments=p,e.renameRAMLElement=f;e.findUsagesImpl=g,e.findUsages=y;var _,O=function(t){function e(e){var n=t.call(this)||this;return n._result=e,n.isAttached=!1,n}return v(e,t),e.prototype.initialize=function(){return t.prototype.initialize.apply(this,arguments),!0},e.content=function(){return this.div({class:"raml-console pane-item",tabindex:-1})},e.prototype.attached=function(){this.isAttached||(this.load(),this.isAttached=!0)},e.prototype.setInput=function(t){this._result=t,this.load()},e.prototype.load=function(){var t=this,e=x.section("References",x.Icon.SEARCH),n=x.list(this._result,function(t){var e=s().getBuffer().positionForCharacterIndex(t.range.start),n=x.hc(x.a(t.uri,function(e){atom.workspace.open(t.uri,{}).then(function(e){var n=s(),r=n.getBuffer().positionForCharacterIndex(t.range.start),i=n.getBuffer().positionForCharacterIndex(t.range.end);n.setSelectedBufferRange({start:r,end:i},{})})}),x.label(" line:",x.Icon.NONE,x.TextClasses.SUBTLE).pad(5,5),x.label(""+e.row,x.Icon.NONE,x.TextClasses.SUCCESS));return n});n.setStyle("max-height","400px"),e.addChild(n),e.addChild(x.button("Close",x.ButtonSizes.SMALL,x.ButtonHighlights.PRIMARY,x.Icon.NONE,function(e){t.panel.destroy(),_=null})),this.html(e.renderUI())},e}(S.ScrollView)},function(t,e){t.exports=require("fs")},function(t,e,n){"use strict";function r(t){Promise.resolve("").then(g.toggleEditorTools),t.getBuffer().emitter.emit("did-change",{oldText:t.getBuffer().getText(),newText:t.getBuffer().getText()})}function i(t){return atom.workspace.observeTextEditors(function(t){return r(t)}),{dispose:function(){}}}function o(t){var e=t.getBuffer().getText();return h.isRAMLUnit(e)}function a(t){return!!(o(t)||m.isSwaggerJson(t)||m.isSwaggerYaml(t))}function s(t){for(var e=[],n=t.getBuffer().getText(),r=0;;){var r=n.indexOf("\t",r);if(r==-1)break;var i=t.getBuffer().positionForCharacterIndex(r),o=t.getBuffer().positionForCharacterIndex(r+1),a={type:"Warning",filePath:t.getPath(),text:"Using tabs  can lead to unpredictable results",trace:[],range:[[i.row,i.column],[o.row,o.column]]};e.push(a),r++}return e}function u(t,e,n){var r=t.getPath();return n[r]||(n[r]=t.getBuffer()),Promise.resolve(e).then(function(t){t.filePath||(t.filePath=r);var e=n[t.filePath];return e?e:new Promise(function(r,i){p.readFile(t.filePath,function(o,a){o?i(o):(e=new f(a.toString()),n[t.filePath]=e,r(e))})})}).then(function(r){if(C.debugDetail("Converting an error with range: ["+e.range.start+" , "+e.range.end+"]","Linter-ui","postPocessError"),null!=e.range.start&&null!=e.range.end){C.debugDetail("Converting an error with range as array: ["+e.range[0]+" , "+e.range[1]+"]","Linter-ui","postPocessError");var i=r.positionForCharacterIndex(e.range.start),o=r.positionForCharacterIndex(e.range.end);C.debugDetail("Result error range: ["+i.row+" , "+i.column+"] ; ["+o.row+" , "+o.column+"]","Linter-ui","postPocessError"),e.range=[[i.row,i.column],[o.row,o.column]]}var a=e.trace||[],s=a.map(function(e){return u(t,e,n)});return Promise.all(s).then(function(t){return e.trace=t,e})})}function c(t,e){var n=[];return w=w.filter(function(r){return r.uri!=t||!(null==e||null==r.expectedVersion||e>=r.expectedVersion)||(n.push(r),!1)}),n}function l(t,e,n){var r=t.getPath();C.documentChanged({uri:r,text:t.getBuffer().getText()}),C.getLatestVersion(r).then(function(t){C.debugDetail("Scheduling validation for uri "+r+" and version "+t,"linter-ui","runValidationSheduleUpdater"),x&&x.version&&x.version>=t?(C.debugDetail("Previous report found v "+x.version+" resolving, issues "+(x.issues?x.issues.length:0),"linter-ui","runValidationSheduleUpdater"),e(x.issues)):(w.push({uri:r,expectedVersion:t,resolve:e,reject:n}),C.debugDetail("Pushing the expected report to the list for version "+t,"linter-ui","runValidationSheduleUpdater"))})}function d(t){if(!a(t))return Promise.resolve([]);Promise.resolve("").then(g.toggleEditorTools);var e=new Promise(function(e,n){l(t,e,n)}).then(function(e){C.debugDetail("Update report handled in with issues "+(e?e.length:0),"linter-ui","lint");var n={},r=e.map(function(e){return u(t,e,n)}),i=s(t);return r=r.concat(i),Promise.all(r).then(function(t){var e=v(t),n=0;return e.filter(function(t){return!!t}).filter(function(t){return!("Warning"===t.type&&n++>=20)})})});return C.debugDetail("Before returning from lint","linter-ui","lint"),e}Object.defineProperty(e,"__esModule",{value:!0});var p=n(12),h=n(14),f=n(15),g=n(16),m=(n(17),n(18));e.grammarScopes=["source.raml","source.syaml","source.sjson"],e.scope="file",e.lintOnFly=!0;var y=n(17);e.relint=r,e.initEditorObservers=i;var v=function(t){var e={};t.forEach(function(t){var n=JSON.parse(JSON.stringify(t));n.trace=null;var r=JSON.stringify(n),i=e[r];i?i.push(t):e[r]=[t]});var n=[];for(var r in e){var i=JSON.parse(r);i.trace=[];var o=e[r];o.forEach(function(t){t.trace&&(i.trace=i.trace.concat(t.trace))}),i.trace=v(i.trace),n.push(i)}return n},C=(function(){function t(){}return t}(),y.getNodeClientConnection()),w=[],x=null;C.onValidationReport(function(t){C.debugDetail("Got debug report for uri "+t.pointOfViewUri+" and version "+t.version,"linter-ui","onValidationReport");var e=c(t.pointOfViewUri,t.version);C.debugDetail("Found expected reports: "+e.length,"linter-ui","onValidationReport");for(var n=0,r=e;n<r.length;n++){var i=r[n];i.resolve(t.issues)}x=t}),e.lint=d},function(t,e){"use strict";function n(t){return t.match(/^(\s*#%RAML\s+(\d\.\d)\s*(\w*)\s*)|(swagger.*)$/m)}Object.defineProperty(e,"__esModule",{value:!0}),e.isRAMLUnit=n},function(t,e){t.exports=require("basarat-text-buffer")},function(t,e,n){"use strict";function r(){var t=i.aquireManager();t&&t.getCurrentEditor()}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.toggleEditorTools=r},function(t,e){t.exports=require("api-language-server")},function(t,e){"use strict";function n(t){console.log("Editor Opened: "+t.getURI());t.getURI()||"";r(t),t.onDidChange(function(){r(t)})}function r(t){Object.keys(c).forEach(function(e){return i(t,e)})}function i(t,e){if(s(t,e)){try{if(c[e](t))return void u(t,"source.s"+e)}catch(t){return}u(t,"source."+e)}}function o(t){return!!JSON.parse(t.getText()).swagger}function a(t){return 0==t.getText().trim().indexOf("swagger:")}function s(t,e){return(t.getURI()||"").toLowerCase().endsWith("."+e)}function u(t,e){t.getGrammar()&&t.getGrammar().scopeName===e||t.setGrammar(atom.workspace.grammarRegistry.grammarForId(e))}Object.defineProperty(e,"__esModule",{value:!0});var c={};e.handle=n,e.isSwaggerJson=o,e.isSwaggerYaml=a,c.json=o,c.yaml=a},function(t,e,n){"use strict";function r(t){b[t.id]=t}function i(t,e,n,r){}function o(t){}function a(t,e,n){}function s(){for(var t in b){var e=b[t];e.calculationStarted&&e.calculationStarted()}var n=[];for(var t in b){var e=b[t];n.push(e.calculateItems())}return Promise.all(n).then(function(t){var e=[];t.forEach(function(t){t.forEach(function(t){u(e,t)})});for(var n in b){var r=b[n];r.calculationFinished&&r.calculationFinished()}return e})}function u(t,e){var n=t;if(e.categories)for(var r in e.categories){var i=e.categories[r],o=f.find(n,function(t){return t.name==i});o||(o=new I(e,i),n.push(o)),o.children?n=o.children:(n=[],o.children=n)}var a=f.find(n,function(t){return t.name==e.name});if(a){var s=n.indexOf(a,0);void 0!=s&&n.splice(s,1)}a=new I(e),n.push(a)}function c(t,e,n){l(t,e.id,n)}function l(t,e,n){g.getNodeClientConnection().executeContextActionByID(t,e,n).then(function(t){var e=m.aquireManager();if(!e)return Promise.resolve([]);for(var n=e.getPath(),r=function(t){if(t.uri==n&&null!=t.text)e.getCurrentEditor().getBuffer().setText(t.text),g.getNodeClientConnection().documentChanged({uri:n,text:t.text});else if(null!=t.text){var r=!1;atom.workspace.getTextEditors().forEach(function(e){e.getPath&&e.getPath()==t.uri&&(e.getBuffer().setText(t.text),r=!0)}),r||(C.sync(w.dirname(t.uri)),v.writeFileSync(t.uri,t.text))}},i=0,o=t;i<o.length;i++){var a=o[i];r(a)}})}function d(t){var e={id:"editorContextActionContributor",calculateItems:function(){var t=m.aquireManager();if(!t)return Promise.resolve([]);var e=t.getPath();if(!e)return Promise.resolve([]);t.getCurrentPosition();return Promise.resolve([])}};r(e),p(),h(),T=!0}function p(){g.getNodeClientConnection().onDisplayActionUI(function(t){g.getNodeClientConnection().debug("Got UI display request","contextActions","contextMenuImpl#handleActionUI");var e=x.getUICode(t.action.id);return e?(global.IDE=atom,global.UI=y,global.UIBuilder=S,e.run(t.initialUIState).then(function(t){return g.getNodeClientConnection().debugDetail("Client: got result on dialog finish","contextActions","handleActionUI"),t})):(g.getNodeClientConnection().error("Can not find UI for action "+t.action.id,"contextActions","handleActionUI"),Promise.resolve({}))})}function h(){g.getNodeClientConnection().setServerConfiguration({actionsConfiguration:{enableUIActions:!0}})}Object.defineProperty(e,"__esModule",{value:!0});var f=n(10),g=n(17),m=n(1),y=n(5),v=n(12),C=n(20),w=n(2),x=n(21),S=n(9),b={};e.registerContributor=r,e.addMenuItem=i,e.deleteMenuItems=o,e.deleteMenuItem=a;var I=function(){function t(t,e){this.selector=t.selector,e?this.name=e:this.name=t.name,this.categories=t.categories,this.onClick=t.onClick,this.children=[]}return t}();e.calculateMenuItemsTree=s;var T=!1;e.launchServerAction=c,e.launchServerActionByID=l,e.initializeActionBasedMenu=d},function(t,e){t.exports=require("mkdirp")},function(t,e,n){"use strict";function r(t){return"completeBody"==t?i:"newMethod"==t?o:"Create new Response"==t?a:"Create new URI Parameter"==t?a:"Create new Query Parameter"==t?a:"Create new Header"==t?a:"Create new Response Header"==t?a:"Create new Response Body"==t?a:"Create new Property"==t?a:"Create new Body"==t?a:null}Object.defineProperty(e,"__esModule",{value:!0});var i=n(22),o=n(23),a=n(24);e.getUICode=r},function(t,e){"use strict";function n(t,e){var n=new i,r=JSON.parse(t),o=n.generateSchema(r),a=JSON.stringify(o,null,2);return a}function r(){var t=new o;return t.show(),t.getResult()}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.generateSchema=function(t){var e={};return e.required=!0,e.$schema="http://json-schema.org/draft-03/schema",this.pass(t,e),e},t.prototype.pass=function(t,e){var n=this.detectType(t);e.type=n,t&&null!=t&&(Array.isArray(t)?this.passArray(t,e):t instanceof Object&&this.passObject(t,e))},t.prototype.passObject=function(t,e){var n=this;Object.keys(t).forEach(function(r){return n.registerProperty(r,t[r],e)})},t.prototype.registerProperty=function(t,e,n){var r=n.properties;r||(r={},n.properties=r);var i=r[t];i||(i={},r[t]=i),i.required=!1,this.pass(e,i)},t.prototype.passArray=function(t,e){var n=this,r=e.items;r||(r=[],e.items=r);var i=(t.length,[]);t.forEach(function(t){var e={};n.pass(t,e),i.push(e)}),r.push(i[0])},t.prototype.detectType=function(t){return Array.isArray(t)?"array":typeof t},t}();e.generateSchema=n;var o=function(){function t(t){void 0===t&&(t="Fill body");var e=this;this.title=t,this.name="",this.needXML=!0,this.needJSON=!0,this.jsexample='{\n "message":"Hello world"\n}',this.xmlexample="",this.xmlschema="",this.jsschema="",this.resultPromise=new Promise(function(t,n){e.resolve=t,e.reject=n})}return t.prototype.extraContent=function(t){},t.prototype.updateButtons=function(){if(this.createButton){if(0==this.name.length)return this.createButton.setDisabled(!0),this.em.setDisplay(!0),void this.em.setText("Please type name of your payload");if(this.needJSON)try{JSON.parse(this.jsexample)}catch(t){return this.createButton.setDisabled(!0),this.em.setDisplay(!0),void this.em.setText("JSON example is not correct")}this.needXML,this.em.setDisplay(!1),this.createButton.setDisabled(!1)}},t.prototype.show=function(){var t=this,e=null;this.em=UI.label("Please type name of your payload",UI.Icon.BUG,UI.TextClasses.ERROR,UI.HighLightClasses.NONE);var n=UI.section(this.title,UI.Icon.BOOK,!1,!1,this.em,UI.h3("Please type name for your payload")).pad(10,10);n.addChild(UI.texfField("",this.name,function(e){t.name=e.getBinding().get(),t.updateButtons()}));var r=UI.checkBox("Create XML body");r.setValue(this.needXML),r.getBinding().addListener(function(e){t.needXML=r.getValue(),t.updateButtons()}),n.addChild(r);var i=UI.checkBox("Create JSON body");i.setValue(this.needJSON),i.getBinding().addListener(function(e){t.needJSON=i.getValue(),t.updateButtons()}),n.addChild(i);var o=UI.hc().setPercentWidth(100).setStyle("display","flex");o.addChild(UI.label("",null,null,null).setStyle("flex","1")),o.addChild(UI.button("Cancel",UI.ButtonSizes.NORMAL,UI.ButtonHighlights.NO_HIGHLIGHT,UI.Icon.NONE,function(t){e.destroy()}).margin(10,10)),this.createButton=UI.button("Create",UI.ButtonSizes.NORMAL,UI.ButtonHighlights.SUCCESS,UI.Icon.NONE,function(n){t.onOk(e),e.destroy()}),o.addChild(this.createButton);var a=new UI.TabFolder;this.createButton.setDisabled(!0),this.createTextSection(a,"JSON Example","source.json","jsexample"),this.createTextSection(a,"JSON Schema","source.json","jsschema"),this.createTextSection(a,"XML Example","text.xml","xmlexample"),this.createTextSection(a,"XML Schema","text.xml","xmlschema"),a.setOnSelected(function(){var e=a.selectedComponent(),n=e.children()[1];n.setText(t[e.id()])}),n.addChild(a),n.addChild(o),e=IDE.workspace.addModalPanel({item:n.renderUI()})},t.prototype.createTextSection=function(t,e,r,i){var o=this,a=UI.vc();a.setCaption(e),a.setId(i);var s=new UI.AtomEditorElement("",function(t){return t});if(s.setMini(!1),s.getBinding().addListener(function(t){o[i]=s.getValue(),o.updateButtons()}),s.setText(""+this[i]),s.setCaption(e),s.setGrammar(r),s.setStyle("height","400px"),s.setStyle("border","solid"),s.setStyle("border-width","1px"),a.addChild(UI.h3("Please type your example here:")),a.addChild(s),"jsexample"==i){var u=UI.button("Generate JSON schema",UI.ButtonSizes.NORMAL,UI.ButtonHighlights.SUCCESS,UI.Icon.NONE,function(e){try{var r=n(o.jsexample,"application/json");o.jsschema=r,t.setSelectedIndex(1)}catch(e){o.jsschema=e.message,t.setSelectedIndex(1)}});a.addChild(u.margin(5,5,5,5))}t.add(e,null,a)},t.prototype.onOk=function(t){this.resolve({name:this.name,needJSON:this.needJSON,needXML:this.needXML,jsexample:this.jsexample,xmlexample:this.xmlexample,jsschema:this.jsschema,xmlschema:this.xmlschema})},t.prototype.getResult=function(){return this.resultPromise},t}();e.run=r},function(t,e){"use strict";function n(t,e,n,i){return void 0===i&&(i=!1),r(t,[{name:"Ok",isPrimary:!0,highlight:UI.ButtonHighlights.PRIMARY,action:e},{name:"Cancel",highlight:UI.ButtonHighlights.NO_HIGHLIGHT,action:function(){return!0}}],n,i)}function r(t,e,n,r){void 0===r&&(r=!1);var o=UI.hc().setPercentWidth(100);e.reverse().forEach(function(e){var n=UI.button(e.name,UI.ButtonSizes.NORMAL,e.highlight,UI.Icon.NONE,function(t){e.action()&&i()});if(e.isPrimary){var r=t.getBinding().status();r&&r.code==UI.StatusCode.ERROR&&n.setDisabled(!0),t.getBinding().addStatusListener(function(e){var r=t.getBinding().status();r&&(r.code!=UI.StatusCode.ERROR?n.setDisabled(!1):n.setDisabled(!0))})}n.setStyle("float","right").margin(4,10),o.addChild(n)}),t.addChild(o);var a=t.ui();return function(e){s.push(t);var i=function(){if(r){var t=a.parentElement,e=document.body.clientHeight;if(t){var n=window.getComputedStyle(t);["paddingBottom","paddingTop","marginBottom","marginTop"].forEach(function(t){e-=parseFloat(n[t]||0)}),a.style.height=e+"px",a.style.overflowY="scroll"}}};window.addEventListener("resize",i),u=IDE.workspace.addModalPanel({item:a}),u.onDidDestroy(function(){window.removeEventListener("resize",i)}),i(),n&&n.ui().focus()}}function i(){s.pop(),0==s.length?u.destroy():u=IDE.workspace.addModalPanel({item:s[s.length-1].ui()})}function o(t,e){var r=t.methodDescriptions,i=t.statusCodeDescriptions,o="No response",a="No response body type",s=null,u=null;null==e&&(e="get");var c=new UI.LabelField,l=new UI.LabelField;[c,l].forEach(function(t){return t.addClass("wizard-description")}),c.getActualField().margin(0,0,18,8),l.getActualField().margin(0,0,8,8);var d=new UI.SelectField("Method:",function(t,n){e=n,c.setText("Method "+n+" "+r[n])},null);d.getActualField().setOptions(Object.keys(r)),d.getActualField().setValue(e,!0);var p=new UI.SelectField("Status code:",function(t,e){e==o&&(e=null,h.getActualField().setValue(a)),s=e,h.setDisabled(null==e),l.setText(e?"Status code "+e+" "+i[e]:"")},null);p.getActualField().setOptions([o].concat(Object.keys(i)));var h=new UI.SelectField("Generate default response with media type:",function(t,e){e==a?(e=null,v.setDisabled(!0)):v.setDisabled(!1),u=e},null);h.getActualField().setOptions([a,"application/json","application/xml","application/x-www-form-urlencoded"]),h.setDisabled(!0),h.margin(0,0,0,12);var f=null,g=new UI.SelectField("Generate default body with media type:",function(t,e){e==a?(e=null,S.setDisabled(!0)):S.setDisabled(!1),f=e},null);g.getActualField().setOptions([a,"application/json","application/xml","application/x-www-form-urlencoded"]),g.margin(0,0,0,12);var m=null,y=null,v=new UI.SelectField("Generate default response body with type:",function(t,e){e==a&&(e=null),m=e},null);v.setDisabled(!0),v.margin(0,0,0,12);var C=t.typeValues,w=C.isSchema,x=C.types;x&&(x=[""].concat(x),v.getActualField().setOptions(x));var S=new UI.SelectField("Generate default body with type:",function(t,e){e==a&&(e=null),y=e},null);S.setDisabled(!0),S.margin(0,0,0,12);var w=C.isSchema,x=C.types;x&&(x=[""].concat(x),S.getActualField().setOptions(x));var b=UI.section("");b.addChild(UI.h3("Body")),b.addChild(g),b.addChild(S),b.addChild(UI.h3("Response")),b.addChild(p),b.addChild(l),b.addChild(h),b.addChild(v),b.ui();var I,T,P=UI.section("Creating a new method",UI.Icon.CODE,!1,!1,d,c,b),C=t.typeValues,E=new Promise(function(t,e){I=t,T=e});return n(P,function(){return I({method:e,realBodyType:f,code:s,bodyTypeString:y,bodyType:u,actualType:m,isSchema:w}),!0})(this),E}function a(t){return o(t)}Object.defineProperty(e,"__esModule",{value:!0});var s=[],u=null;e.newMethod=o,e.run=a},function(t,e){"use strict";function n(t){if(t.isParentNull)return Promise.resolve({canceled:!0});var e={},n=UIBuilder.buildItem(t.detailsTree,{uri:"localchanges",position:-1,reconciler:{schedule:function(t){return t.run()}},localModel:e});n.setTitle(t.title);var r=n.render({showDescription:!0});return r.margin(8,8,8,8),new Promise(function(t){UI.simpleModalDialog(r,function(){return t(e),!0},function(){return t({canceled:!0}),!0})})}Object.defineProperty(e,"__esModule",{value:!0}),e.run=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(26);"undefined"==typeof Promise&&"undefined"!=typeof window&&(window.Promise=r);var i=function(){function t(t,e){this.logger=t,this.timeout=e,this.waitingList=[],this.runningList=[]}return t.prototype.schedule=function(t){var e=this;return this.addToWaitingList(t),new Promise(function(n,r){setTimeout(function(){if(e.logger.debugDetail("Time came to execute "+t.toString(),"Reconciler","schedule"),t.isCanceled())return e.logger.debugDetail("Runnable "+t.toString()+" is cancelled, doing nothing","Reconciler","schedule"),void e.removeFromWaitingList(t);var i=e.findConflictingInRunningList(t);return i?(e.logger.debugDetail("Conflicting to "+t.toString()+" is found in the running list: "+i.toString()+" rescheduling current one.","Reconciler","schedule"),void e.schedule(t)):(e.removeFromWaitingList(t),e.addToRunningList(t),e.logger.debugDetail("Executing "+t.toString(),"Reconciler","schedule"),void e.run(t).then(function(t){n(t)},function(t){r(t)}))},e.timeout)})},t.prototype.run=function(t){var e=this;return t.run().then(function(n){return e.removeFromRunningList(t),n},function(n){throw e.removeFromRunningList(t),n})},t.prototype.addToWaitingList=function(t){var e=this;this.logger.debugDetail("Adding runnable "+t.toString()+" to waiting list","Reconciler","addToWaitingList"),this.waitingList=this.waitingList.filter(function(n){e.logger.debugDetail("Comparing existing runnable "+n.toString()+" to the new "+t.toString(),"Reconciler","addToWaitingList");var r=t.conflicts(n);return r&&(e.logger.debugDetail("Runnables are conflicting, canceling existing one","Reconciler","addToWaitingList"),n.cancel()),!r}),this.waitingList.push(t)},t.prototype.removeFromWaitingList=function(t){this.logger.debugDetail("Removing "+t.toString()+" from waiting list","Reconciler","removeFromWaitingList");var e=this.waitingList.indexOf(t);e!==-1&&this.waitingList.splice(e,1)},t.prototype.addToRunningList=function(t){this.logger.debugDetail("Adding "+t.toString()+" to running list","Reconciler","removeFromWaitingList"),this.runningList.push(t)},t.prototype.removeFromRunningList=function(t){this.logger.debugDetail("Removing "+t.toString()+" from running list","Reconciler","removeFromWaitingList");var e=this.runningList.indexOf(t);e!==-1&&this.runningList.splice(e,1)},t.prototype.findConflictingInRunningList=function(t){for(var e=0,n=this.runningList;e<n.length;e++){var r=n[e];if(t.conflicts(r))return r}return null},t}();e.Reconciler=i},function(t,e){t.exports=require("promise-polyfill")},function(t,e,n){"use strict";function r(){var t=atom.workspace.getActiveTextEditor();return t?t:d.aquireManager()?d.aquireManager().getCurrentEditor():null}function i(t){return t?t.text:""}function o(t,e,n,r){void 0===r&&(r=null);var o=u.treeViewer(function(t){return t.children},new g(r),i);return o.setBasicLabelFunction(function(t){return t.text}),o.setKeyProvider({key:function(t){return t.key}}),o.addSelectionListener(e),o.getBinding().set(t),o}function a(t,e,n){if(void 0===n&&(n=null),!t)return new u.TabFolder;var r=t[p.StructureCategories[p.StructureCategories.ResourcesCategory]],i=t[p.StructureCategories[p.StructureCategories.SchemasAndTypesCategory]],a=t[p.StructureCategories[p.StructureCategories.ResourceTypesAndTraitsCategory]],s=t[p.StructureCategories[p.StructureCategories.OtherCategory]],c=null!=r?o(r,{selectionChanged:e},p.StructureCategories[p.StructureCategories.ResourcesCategory],n):null,l=null!=i?o(i,{selectionChanged:e},p.StructureCategories[p.StructureCategories.SchemasAndTypesCategory],n):null,d=null!=a?o(a,{selectionChanged:e},p.StructureCategories[p.StructureCategories.ResourceTypesAndTraitsCategory],n):null,h=null!=s?o(s,{selectionChanged:e},p.StructureCategories[p.StructureCategories.OtherCategory],n):null,f=new u.TabFolder;return f.add("Resources",u.Icon.SEARCH,c,"raml-icon-custom"),f.add("Schemas&Types",u.Icon.SEARCH,l,"raml-icon-custom"),f.add("ResourceTypes&Traits",u.Icon.SEARCH,d,"raml-icon-custom"),f.add("Other",u.Icon.SEARCH,h,"raml-icon-custom"),f.setSelectedIndex(0),f.setOnSelected(function(){var t=f.selectedComponent();if(t){var n=t.getSelection();n&&n.elements&&n.elements.length>0&&e(new u.SelectionChangedEvent(t,null,n)),t.customizePanel(!0)}}),f}var s=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var u=n(5),c=n(6),l=u.CompositeDisposable,d=n(1),p=n(17);e.getActiveEditor=r;var h=function(t){function e(){var e=t.call(this)||this;return e.disposables=new l,e.fire=!0,e.createTree(null),e.addClass("raml-outline"),e.addChild(e._rs),e}return s(e,t),e.prototype.createTree=function(t){var e=this;this._rs=a(t,function(t){if(t.selection&&t.selection.elements&&1==e.fire&&t.selection.elements.length>0&&t.selection.elements[0]){var n=r(),i=n.getBuffer().positionForCharacterIndex(t.selection.elements[0].start),o=n.getBuffer().positionForCharacterIndex(t.selection.elements[0].start);n.setSelectedBufferRange({start:i,end:o},{})}}),this._viewers=[],t&&(this._viewers=[0,1,2,3].map(function(t){return e._rs.get(t).content}))},e.prototype.getTitle=function(){return"Outline"},e.prototype.getNodePType=function(t){return t.category,t.category==p.StructureCategories[p.StructureCategories.ResourcesCategory]?0:t.category==p.StructureCategories[p.StructureCategories.SchemasAndTypesCategory]?1:t.category==p.StructureCategories[p.StructureCategories.ResourceTypesAndTraitsCategory]?2:(t.category==p.StructureCategories[p.StructureCategories.OtherCategory],3)},e.prototype.setSelection=function(t){this._selectedNode=t,this.fire=!1;try{var e=this.getNodePType(t),n=this._viewers[e];null!=n&&(n.setSelection(t),this._rs.setSelectedIndex(e))}finally{this.fire=!0}},e.prototype.setUnit=function(t,e){var n=this;void 0===e&&(e=!1),this.unitPath&&t&&t!=this.unitPath&&(this._children=[]),this.unitPath=t;var i=r();p.getNodeClientConnection().documentChanged({uri:t,text:i.getText()});var o=p.getNodeClientConnection().getStructure(t);o&&o.then(function(t){n.createTree(t),n.addClass("raml-outline"),n._children=[],
n.addChild(n._rs),n.html(n.innerRenderUI())}).catch(function(t){})},e.prototype.attach=function(){if(!this._isAttached){var t=$(this);t.html(this._rs.renderUI().outerHTML),this._isAttached=!0}},e.prototype.forEachViewer=function(t){this._viewers.forEach(t)},e.prototype.refresh=function(){var t=this.unitPath;this.setUnit(null),this.setUnit(t)},e.prototype.destroy=function(){d.aquireManager()._view=null,this.unitPath=null,this._viewers=[],this._rs=null,this._children=[],this.disposables.dispose()},e}(c.Scrollable);e.RamlOutline=h;var f;!function(t){t[t.Resource=0]="Resource",t[t.Schema=1]="Schema",t[t.Type=2]="Type",t[t.Trait=3]="Trait",t[t.Unknown=4]="Unknown"}(f||(f={})),e.createTree=a;var g=function(){function t(t){this.opener=t}return t.prototype.iconNameToIconEnum=function(t){return t?u.Icon[t]:null},t.prototype.textHighlightNameToTextClass=function(t){return t?u.TextClasses[t]:null},t.prototype.render=function(t){try{var e=u.Icon.DASH,n=u.TextClasses.NORMAL;this.iconNameToIconEnum(t.icon)&&(e=this.iconNameToIconEnum(t.icon)),this.textHighlightNameToTextClass(t.textStyle)&&(n=this.textHighlightNameToTextClass(t.textStyle));var r=(u.TextClasses.NORMAL,u.hc(u.label(t.text,e,n)));return t.typeText&&r.addChild(u.label(t.typeText,u.Icon.NONE,u.TextClasses.WARNING).margin(2,0,0,0)),r.addClass("outline"),r}catch(t){return console.log(t),u.hc(u.label("Illegal node",u.Icon.ARROW_SMALL_LEFT,null,null))}},t}();e.HLRenderer=g},function(t,e){"use strict";function n(t,e){var n=i(t);n.clear(),e.forEach(function(t){n.markBufferRange(t)}),t.decorateMarkerLayer(n,{type:"highlight",class:"raml-occurence"})}function r(t){var e=i(t);e.clear()}function i(t){var e=t.occurencesLayerId,n=e&&t.getMarkerLayer(e);return n||(n=t.addMarkerLayer()),t.occurencesLayerId=n.id,n}Object.defineProperty(e,"__esModule",{value:!0}),e.markOccurences=n,e.clearOccurences=r;var o=function(){function t(t,e){this.editor=t,this.position=e,this.cancelled=!1,this.offset=t.getBuffer().characterIndexForPosition(e)}return t.prototype.run=function(){return Promise.resolve()},t.prototype.runSynchronously=function(){},t.prototype.conflicts=function(t){if(!t.getMarkOccurrencesPath)return!1;var e=t.getMarkOccurrencesPath();return this.getMarkOccurrencesPath()==e},t.prototype.cancel=function(){this.cancelled=!0},t.prototype.isCanceled=function(){return this.cancelled},t.prototype.getMarkOccurrencesPath=function(){return this.editor.getPath()},t}();e.MarkOccurrenceRunnable=o},function(t,e,n){"use strict";function r(){return p||(p=new d),p}function i(){r().show()}function o(){u.registerQuickCommands(r()),p.add("aml-workbench:editor-tools","Show Editor Tools",function(){return c.initEditorTools()},function(){return 0==c.editorToolsStatus()})}Object.defineProperty(e,"__esModule",{value:!0});var a=n(30),s=n(3),u=n(31),c=n(1),l=function(){function t(t,e,n,r,i){this.id=t,this.title=e,this.command=n,this.priority=r,this.when=i}return t.prototype.registerAsAtomCommand=function(t){this.atomCommand&&0==this.atomCommand.disposed&&this.atomCommand.dispose(),this.atomCommand=s.commands.add(t,this.id,this.command)},t.prototype.dispose=function(){this.atomCommand&&0==this.atomCommand.disposed&&this.atomCommand.dispose(),p.unregister(this)},t}();e.QuickCommand=l;var d=function(){function t(){this.commands={},this.panel=new a.SelectListView(function(t){return t.command()},function(t){return t.title},"title")}return t.prototype.register=function(t){return null!=this.commands[t.id]&&this.unregister(t.id),this.commands[t.id]=t,t},t.prototype.unregister=function(t){"string"==typeof t&&this.unregister(this.commands[t]);var e=t;return null==e?null:(delete this.commands[e.id],e)},t.prototype.add=function(t,e,n,r,i,o){var a=new l(t,e,n,i?i:0,r?r:function(){return!0});return o&&a.registerAsAtomCommand(o),this.register(a),a},t.prototype.show=function(t){var e={};for(var n in this.commands)e[n]=this.commands[n];this.getDynamicCommands().forEach(function(t){e[t.id]=t});var r=Object.keys(e).map(function(t){return e[t]}).sort(function(t,e){return e.priority-t.priority}).filter(function(t){return t.when()});t&&(r=r.filter(t)),this.panel.show(r)},t.prototype.getDynamicCommands=function(){var t=[];return t},t}();e.CommandManager=d;var p;e.manager=r,e.showCommands=i,e.registerCommands=o},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(7),a=function(t){function e(e,n,r){void 0===r&&(r="");var i=t.call(this,[])||this;return i._confirmed=e,i.label=n,i.filterKey=r,i}return r(e,t),e.prototype.getFilterKey=function(){return this.filterKey},e.prototype.viewForItem=function(t){return"<li>"+this.label(t)+"</li>"},e.prototype.cancel=function(){this.panel.hide(),t.prototype.cancel.call(this)},e.prototype.hide=function(){this.panel&&this.panel.hide()},e.prototype.confirmed=function(t){return this._confirmed(t),this.hide(),this.getSelectedItemView()},e.prototype.show=function(t){this.storeFocusedElement(),this.panel||(this.panel=i.workspace.addModalPanel({item:this})),this.setItems(t),this.panel.show(),this.focusFilterEditor()},e}(o.SelectListView);e.SelectListView=a},function(t,e){"use strict";function n(t){}Object.defineProperty(e,"__esModule",{value:!0}),e.registerQuickCommands=n},function(t,e,n){"use strict";function r(t){var e=t.editor.getBuffer().characterIndexForPosition(t.triggerPosition);if(t.suggestion.annotation){for(var n=t.editor.getBuffer().getText(),r=e;r<n.length;r++){var i=n.charAt(r);if(")"==i){e=r+1;break}if("\r"==i||"\n"==i)return}var o=t.editor.getBuffer().positionForCharacterIndex(e);return void t.editor.getBuffer().insert(o,":")}if(t.suggestion.replacementPrefix&&t.suggestion.extra||"%"==t.suggestion.extra){var o=t.editor.getBuffer().positionForCharacterIndex(e-t.suggestion.replacementPrefix.length);t.editor.getBuffer().insert(o,t.suggestion.extra)}else{if(" "==t.suggestion.extra){var o=t.editor.getBuffer().positionForCharacterIndex(e);t.editor.getBuffer().insert(o,t.suggestion.extra)}if(" { "==t.suggestion.extra){var o=t.editor.getBuffer().positionForCharacterIndex(e);t.editor.getBuffer().insert(o,t.suggestion.extra)}if(t.suggestion.extra&&t.suggestion.extra.indexOf("!include")!=-1){var o=t.editor.getBuffer().positionForCharacterIndex(e);t.editor.getBuffer().insert(o,t.suggestion.extra)}}}function i(t){var e=t.editor,n=e.getBuffer().characterIndexForPosition(t.bufferPosition);return o.getNodeClientConnection().documentChanged({uri:t.editor.getPath(),text:e.getText()}),o.getNodeClientConnection().getSuggestions(t.editor.getPath(),n)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(17);e.selector=".source.raml, .source.sjson, .source.syaml",e.disableForSelector=".text.html .comment",e.filterSuggestions=!0,e.inclusionPriority=1,e.excludeLowerPriority=!0,e.onDidInsertSuggestion=r,e.getSuggestions=i},function(t,e){"use strict";function n(){var t=document.registerElement;document.registerElement=function(e,n){if("atom-pane-resize-handle"===e){var r=n.prototype;if(r){var i=r.attachedCallback;r.attachedCallback=function(){if(this.parentElement)return i.apply(this,[])}}document.registerElement=t}return t.apply(document,[e,n])}}Object.defineProperty(e,"__esModule",{value:!0}),e.doPatch=n},function(t,e){t.exports=require("atom")},function(t,e,n){"use strict";function r(t,e,n,r){if(!d.find(s(),function(t){return t==e})){var i=atom.commands.add(t,e,n),o={commandId:e,tag:r,disposable:i};if(p[e]=o,r){var a=h[r];a||(a=[],h[r]=a),a.push(o)}}}function i(t){atom.commands.registeredCommands[t]=null,atom.commands.selectorBasedListenersByCommandName[t]=null}function o(t){var e=p[t];if(e&&(e.disposable.dispose(),delete p[t],e.tag)){var n=h[e.tag];if(!n)return;var r=-1;d.find(n,function(e,n){return e.commandId==t&&(r=n,!0)}),r!=-1&&n.splice(r,1)}}function a(t){var e=h[t];if(e){for(var n in e){var r=e[n];r.disposable.dispose(),delete p[r.commandId]}delete h[t]}}function s(){var t=[];for(var e in atom.commands.selectorBasedListenersByCommandName)t.push(e);return t}function u(){if(!f){f=!0;try{atom.packages.activatePackage("command-palette");var t=function(){l()};t.commandManager=!0,atom.commands.add("atom-workspace","command-palette:toggle",t);var e=atom.commands.selectorBasedListenersByCommandName["command-palette:toggle"];e.forEach(function(t){var e=t.callback||t.didDispatch;e&&e.commandManager&&(t.sequenceNumber=1005e5)})}catch(t){console.error(t.message)}}}function c(t){g[t.id]=t}function l(){a(e.DYNAMIC_COMMAND_TAG);for(var t in g){var n=g[t];n.calculationStarted&&n.calculationStarted()}for(var t in g){var n=g[t];n.calculateItems().forEach(function(t){r(t.selector,"aml-workbench:"+t.id,t.callBack,e.DYNAMIC_COMMAND_TAG)})}for(var t in g){var n=g[t];n.calculationFinished&&n.calculationFinished()}}Object.defineProperty(e,"__esModule",{value:!0});var d=n(10);e.DYNAMIC_COMMAND_TAG="DYNAMIC_COMMAND_TAG";var p={},h={};e.addCommand=r,e.deleteUnmanagedCommand=i,e.deleteManagedCommand=o,e.deleteCommandsByTag=a,e.listCommands=s;var f=!1;e.initialize=u;var g={};e.registerContributor=c},function(t,e,n){"use strict";function r(){h||(h=!0,c=atom.contextMenu.constructor.prototype.showForEvent,atom.contextMenu.constructor.prototype.showForEvent=function(t){i().then(function(){c.apply(atom.contextMenu,[t]),u()})})}function i(){try{return p.calculateMenuItemsTree().then(function(t){var e={};s(),d.deleteCommandsByTag(d.DYNAMIC_COMMAND_TAG),t.forEach(function(t){var n=e[t.selector];n||(n=a(t.selector),e[t.selector]=n);var r=o(t);n.items.push(r)})})}catch(t){console.log(t.message)}}function o(t){var e={label:t.name};if(t.children.length>0)e.submenu=[];else{var n="aml-workbench:"+t.name;d.listCommands();d.addCommand(t.selector,n,t.onClick,d.DYNAMIC_COMMAND_TAG),e.command=n}return t.children.forEach(function(t){var n=o(t);e.submenu.push(n)}),e}function a(t){var e=l.find(atom.contextMenu.itemSets,function(t){return t.tag&&t.tag==f});return e||(e={items:[],selector:t,specificity:11,tag:f},atom.contextMenu.itemSets.push(e),l.find(g,function(e){return e==t})||g.push(t)),e}function s(){var t=l.filter(atom.contextMenu.itemSets,function(t){return t.tag&&t.tag==f});t.forEach(function(t){t.items=[]})}function u(){}Object.defineProperty(e,"__esModule",{value:!0});var c,l=n(10),d=n(35),p=n(19);e.initialize=r;var h=!1,f="DYNAMIC_SET_TAG",g=[]},function(t,e){t.exports=require("atom-package-deps")}]);
//# sourceMappingURL=main.js.map